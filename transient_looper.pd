#N canvas 827 239 527 327 12;
#N canvas 0 0 450 250 (subpatch) 0;
#X array \$0-looper 441000 float 2;
#X coords 0 1 441000 -1 200 140 1;
#X restore 7 38 graph;
#X obj 611 674 phasor~;
#X obj 714 357 timer;
#X obj 714 310 bng 25 250 50 0 empty empty empty 17 7 0 10 #000000 #ffffff #ffffff;
#X obj 750 310 bng 25 250 50 0 empty empty empty 17 7 0 10 #000000 #ffffff #ffffff;
#X floatatom 714 383 5 0 0 0 - - - 12;
#X obj 714 408 t f f;
#X obj 959 645 * 44.1;
#X obj 611 704 *~;
#X obj 714 547 expr (1000 / $f1);
#X msg 74 469 start;
#X msg 133 469 stop;
#X obj 23 868 dac~;
#X obj 23 779 *~;
#X obj 781 692 expr $f1 * $f2;
#X obj 611 645 sig~;
#X floatatom 611 616 5 0 0 0 - - - 12;
#X obj 611 587 expr $f2 / $f1;
#X obj 23 531 tabwrite~ \$0-looper;
#X obj 23 719 tabread4~ \$0-looper;
#N canvas 0 50 450 300 stutter-gate 0;
#X obj 479 261 line;
#X msg 479 209 1 5000;
#X msg 560 209 0;
#X obj 479 140 bng 25 250 50 0 empty empty empty 17 7 0 10 #000000 #ffffff #ffffff;
#X obj 479 172 t b b;
#X obj 482 319 hsl 128 17 0 1 0 0 empty empty empty -2 -8 0 10 #000000 #ffffff #ffffff 0 1;
#X obj 479 378 outlet;
#X obj 479 87 inlet;
#X text 549 86 bang triggers;
#X connect 0 0 5 0;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 4 1 2 0;
#X connect 5 0 6 0;
#X connect 7 0 3 0;
#X restore 889 66 pd stutter-gate;
#X obj 100 7 tgl 25 1 empty empty empty 17 7 0 10 #000000 #ffffff #ffffff 1 1;
#X text 129 9 is recording;
#X obj 221 54 vsl 17 128 0 1 0 0 \$0-vol empty empty 0 -9 0 10 #000000 #ffffff #ffffff 0 1;
#X obj 46 751 r \$0-vol;
#X obj 256 67 vu 20 120 empty empty -1 -8 0 10 #000000 #ffffff 1 0;
#X obj 106 844 env~;
#X obj 106 882 - 100;
#X obj 106 908 s \$0-vu-meter;
#X obj 253 -33 r \$0-vu-meter;
#X obj 22 248 hsl 128 17 -1 2 0 1 empty empty empty -2 -8 0 10 #000000 #ffffff #ffffff 8467 1;
#X text 7 221 playback speed;
#X obj 172 248 hsl 128 17 0 1 0 1 empty empty empty -2 -8 0 10 #000000 #ffffff #ffffff 12700 1;
#X obj 393 13 r \$1-playback-speed;
#X obj 553 13 r \$1-playback-dur;
#X text 157 221 playback duration (%);
#X text 100 311 start recording when transient is detected;
#X obj 100 -92 r \$1-looper-rec-start, f 31;
#X obj 100 -63 r \$1-looper-rec-stop;
#X text 100 338 todo: abstract starting and stopping of loop into parent--rotate buffers;
#X obj 74 396 r \$1-looper-rec-start, f 31;
#X obj 133 425 r \$1-looper-rec-stop;
#X obj 889 13 r \$1-looper-rec-start, f 31;
#X obj 714 225 r \$1-looper-rec-start, f 31;
#X obj 750 259 r \$1-looper-rec-stop;
#X obj 889 117 s \$0-duration-percent;
#X obj 781 645 r \$1-playback-dur;
#X obj 552 547 r \$1-playback-speed;
#X obj 714 13 loadbang;
#X obj 714 78 int 1;
#X obj 714 106 s \$1-playback-speed;
#X obj 714 142 s \$1-playback-dur;
#X obj 714 40 bng 25 250 50 0 empty empty empty 17 7 0 10 #000000 #ffffff #ffffff;
#X obj 16 179 hsl 194 16 0 441000 0 0 empty empty empty -2 -8 0 10 #000000 #ffffff #ffffff 0 1;
#X obj 611 733 s~ \$0-playhead;
#X obj -156 153 r~ \$0-playhead;
#X obj -156 179 sig2float~;
#X obj 23 686 r~ \$0-playhead;
#X text 759 379 sample time (ms);
#X text 23 650 playback;
#X text 552 518 playback speed modifier;
#X text 781 612 playback duration modifier;
#X obj 23 287 catch~ looper-\$1-send;
#X obj 206 1100 line;
#X msg 206 1063 1 10000;
#X floatatom 206 1126 5 0 0 0 - - - 12;
#X obj 206 1235 s \$0-recordhead;
#X msg 279 1063 0;
#X obj 40 1151 expr ($f1 == 1);
#X obj 40 1177 sel 1;
#X obj 40 1203 bng 25 250 50 0 empty empty empty 17 7 0 10 #000000 #ffffff #ffffff;
#X obj 40 1235 s \$1-looper-rec-stop;
#X obj 206 1010 r \$1-looper-rec-start;
#X obj 279 1031 r \$1-looper-rec-stop;
#X text 59 971 in case we record for longer than 10 secs;
#X text 714 200 record into buffer;
#X obj 367 496 expr ($f1 == $f2);
#X obj 367 459 r looper-pos;
#X obj 207 496 r looper-rec-start;
#X obj 321 582 t b b, f 6;
#X obj 321 549 spigot;
#X obj 493 459 int \$1;
#X obj 350 624 s \$1-looper-rec-stop;
#X obj 321 659 s \$1-looper-rec-start;
#X connect 1 0 8 0;
#X connect 2 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 2 1;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 6 1 7 0;
#X connect 7 0 14 1;
#X connect 8 0 54 0;
#X connect 9 0 17 1;
#X connect 10 0 18 0;
#X connect 11 0 18 0;
#X connect 13 0 12 0;
#X connect 13 0 12 1;
#X connect 13 0 26 0;
#X connect 14 0 8 1;
#X connect 15 0 1 0;
#X connect 16 0 15 0;
#X connect 17 0 16 0;
#X connect 19 0 13 0;
#X connect 24 0 13 1;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 29 0 25 0;
#X connect 33 0 30 0;
#X connect 34 0 32 0;
#X connect 37 0 21 0;
#X connect 38 0 21 0;
#X connect 40 0 10 0;
#X connect 41 0 11 0;
#X connect 42 0 20 0;
#X connect 43 0 3 0;
#X connect 44 0 4 0;
#X connect 46 0 14 0;
#X connect 47 0 17 0;
#X connect 48 0 52 0;
#X connect 49 0 50 0;
#X connect 49 0 51 0;
#X connect 52 0 49 0;
#X connect 55 0 56 0;
#X connect 56 0 53 0;
#X connect 57 0 19 0;
#X connect 62 0 18 0;
#X connect 63 0 65 0;
#X connect 64 0 63 0;
#X connect 65 0 66 0;
#X connect 65 0 68 0;
#X connect 67 0 63 0;
#X connect 68 0 69 0;
#X connect 69 0 70 0;
#X connect 70 0 71 0;
#X connect 72 0 64 0;
#X connect 73 0 67 0;
#X connect 76 0 80 1;
#X connect 77 0 76 0;
#X connect 78 0 80 0;
#X connect 79 0 83 0;
#X connect 79 1 82 0;
#X connect 80 0 79 0;
#X connect 81 0 76 1;
#X coords 0 0 1 1 366 274 1 0 0;
